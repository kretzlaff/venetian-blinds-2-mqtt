name: Docker Image CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:

  build:

    # The host should always be Linux
    runs-on: ubuntu-18.04
    name: Build on ubuntu-18.04 armv7

    steps:
    - uses: actions/checkout@v2
    - uses: uraimo/run-on-arch-action@v2.0.5
    - name: Build the Docker image
      id: runcmd
          with:
            arch: armv7
            distro: ubuntu18.04
            run: docker build . --file Dockerfile --tag keretzlaff/venetian-blinds-2-mqtt:$(date +%s)
